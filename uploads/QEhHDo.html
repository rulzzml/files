<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Info & Updates - RulzXD API</title>
  <link rel="icon" href="https://i.ibb.co.com/LzkZDQXg/20251113-150138.png">
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  
  <style>
  :root {
    --bg-1: #0a1129;
    --bg-2: #0f1a3d;
    --card: rgba(30, 58, 138, 0.15);
    --muted: #93c5fd;
    --accent-from: #2563eb;
    --accent-to: #3b82f6;
    --glass-border: rgba(59, 130, 246, 0.15);
    --text: #e0f2fe;
    --shadow: rgba(2, 8, 30, 0.6);
    --error: #ef4444;
    --success: #22c55e;
  }

  html, body {
    background-color: var(--bg-1);
    font-family: 'Poppins', system-ui, sans-serif;
    font-weight: 400;
    background: linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 100%);
    color: var(--text);
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
    overflow-x: hidden;
    scroll-behavior: smooth;
  }

  .nav-full {
    width: 100%;
    background: rgba(15, 26, 61, 0.95);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--glass-border);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1000;
  }

  .nav-content {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 1rem;
    height: 70px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .gradient-text {
    background: linear-gradient(90deg, var(--accent-from), var(--accent-to));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .muted {
    color: var(--muted);
    font-size: 0.875rem;
  }

  .btn-primary {
    background: linear-gradient(90deg, var(--accent-from), var(--accent-to));
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    font-weight: 600;
    border: none;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    font-size: 14px;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
  }

  .hamburger {
    width: 40px;
    height: 40px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    cursor: pointer;
    border-radius: 8px;
  }

  .hamburger .line {
    width: 20px;
    height: 2px;
    background: var(--text);
    border-radius: 2px;
    transition: all 0.3s ease;
  }

  .hamburger.active .line:nth-child(1) {
    transform: translateY(6px) rotate(45deg);
  }

  .hamburger.active .line:nth-child(2) {
    opacity: 0;
  }

  .hamburger.active .line:nth-child(3) {
    transform: translateY(-6px) rotate(-45deg);
  }

  .mobile-menu {
    position: fixed;
    top: 0;
    left: -100%;
    width: 280px;
    height: 100vh;
    background: rgba(15, 26, 61, 0.98);
    border-right: 1px solid var(--glass-border);
    z-index: 999;
    transition: left 0.3s ease;
    overflow-y: auto;
  }

  .mobile-menu.open {
    left: 0;
  }

  .mobile-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 998;
    display: none;
  }

  .mobile-overlay.active {
    display: block;
  }

  main {
    padding-top: 90px;
    padding-bottom: 3rem;
    min-height: calc(100vh - 180px);
    max-width: 1280px;
    margin: 0 auto;
    width: 100%;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  @media (max-width: 768px) {
    main {
      padding-top: 80px;
      padding-left: 0.75rem;
      padding-right: 0.75rem;
    }
  }

  @media (max-width: 480px) {
    main {
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
  }

  h1 {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    background: linear-gradient(90deg, var(--accent-from), var(--accent-to));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  h1 i {
    margin-right: 10px;
    color: var(--accent-to);
  }

  h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
    color: var(--accent-to);
  }

  section {
    margin-bottom: 3rem;
    margin-top: 2rem;
    scroll-margin-top: 120px;
  }

  .info-card {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(59, 130, 246, 0.05));
    border: 1px solid var(--glass-border);
    border-radius: 14px;
    padding: 1.75rem;
    margin-bottom: 1.5rem;
    transition: all 0.3s ease;
  }

  .info-card:hover {
    border-color: rgba(59, 130, 246, 0.4);
    transform: translateY(-3px);
    box-shadow: 0 12px 36px rgba(37, 99, 235, 0.25);
  }

  .update-badge {
    display: inline-block;
    padding: 5px 14px;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 0.3px;
    margin-right: 12px;
    text-transform: uppercase;
  }

  .badge-new { 
    background: linear-gradient(135deg, var(--success), #10b981); 
    color: white;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
  }
  
  .badge-info { 
    background: linear-gradient(135deg, var(--accent-from), var(--accent-to)); 
    color: white;
    box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
  }

  .feature-item {
    display: flex;
    align-items: flex-start;
    margin-bottom: 1rem;
    background: rgba(59, 130, 246, 0.08);
    border-radius: 10px;
    padding: 12px;
    border: 1px solid rgba(59, 130, 246, 0.15);
  }

  .feature-icon {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(37, 99, 235, 0.1));
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 14px;
    color: #60a5fa;
    flex-shrink: 0;
    border: 1px solid rgba(59, 130, 246, 0.2);
  }

  .feature-title {
    font-weight: 600;
    color: var(--accent-to);
    font-size: 0.95rem;
    margin-bottom: 4px;
  }

  .feature-desc {
    color: var(--text);
    font-size: 0.85rem;
    line-height: 1.4;
  }

  .pricing-card {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.05));
    border: 1px solid rgba(16, 185, 129, 0.25);
    border-radius: 16px;
    padding: 2rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    margin-bottom: 2rem;
  }

  .pricing-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--success), #10b981);
  }

  .pricing-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 50px rgba(16, 185, 129, 0.2);
    border-color: rgba(16, 185, 129, 0.4);
  }

  .apikey-display {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 15px;
    margin: 20px 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 15px;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
  }

  .apikey-display:hover {
    background: rgba(0, 0, 0, 0.4);
    border-color: rgba(59, 130, 246, 0.3);
  }

  .apikey-text {
    color: #a5b4fc;
    font-size: 15px;
    font-weight: 500;
    letter-spacing: 0.5px;
    flex: 1;
    word-break: break-all;
    padding-right: 15px;
    font-family: 'JetBrains Mono', 'Courier New', monospace;
  }

  .copy-btn {
    background: rgba(59, 130, 246, 0.2);
    border: 1px solid rgba(59, 130, 246, 0.4);
    color: #93c5fd;
    padding: 10px 18px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 8px;
    height: fit-content;
    min-height: 40px;
  }

  .copy-btn:hover {
    background: rgba(59, 130, 246, 0.3);
    border-color: rgba(59, 130, 246, 0.6);
    transform: translateY(-1px);
  }

  .copy-btn.copied {
    background: var(--success) !important;
    border-color: var(--success) !important;
    color: white !important;
  }

  .faq-item {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.08), rgba(59, 130, 246, 0.04));
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .faq-item:hover {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.12), rgba(59, 130, 246, 0.06));
    border-color: rgba(59, 130, 246, 0.3);
  }

  .faq-item.active {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.15), rgba(59, 130, 246, 0.08));
    border-color: rgba(59, 130, 246, 0.4);
  }

  .faq-question {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
    font-size: 1.05rem;
  }

  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    margin-top: 0;
    opacity: 0;
  }

  .faq-answer.show {
    max-height: 800px;
    margin-top: 1.25rem;
    opacity: 1;
  }

  .faq-icon {
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .faq-item.active .faq-icon {
    transform: rotate(180deg);
  }

  .loading-spinner {
    display: inline-block;
    width: 40px;
    height: 40px;
    border: 3px solid rgba(59, 130, 246, 0.3);
    border-radius: 50%;
    border-top-color: #3b82f6;
    animation: spin 0.8s linear infinite;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  .loading-container {
    text-align: center;
    padding: 3rem;
  }

  .loading-text {
    margin-top: 1rem;
    color: var(--muted);
    font-weight: 500;
  }

  footer {
    max-width: 1280px;
    margin: 0 auto;
    padding-left: 1rem;
    padding-right: 1rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding-top: 2rem;
    padding-bottom: 2rem;
  }

  .hidden {
    display: none !important;
  }

  .flex { display: flex; }
  .items-center { align-items: center; }
  .justify-between { justify-content: space-between; }
  .gap-3 { gap: 0.75rem; }
  .gap-4 { gap: 1rem; }
  .gap-6 { gap: 1.5rem; }
  
  @media (min-width: 1024px) {
    .lg\:hidden { display: none !important; }
    .lg\:flex { display: flex !important; }
  }
  
  @media (max-width: 1023px) {
    .lg\:flex { display: none !important; }
  }

  @media (max-width: 768px) {
    .nav-content .flex.items-center.gap-3 > div {
      display: flex;
      align-items: center;
      height: 40px;
    }
    
    .nav-content .flex.items-center.gap-3 > div h1 {
      line-height: 1;
      margin: 0;
    }
    
    .mobile-menu {
      padding-top: 20px;
    }
    
    .mobile-menu .p-6 {
      padding-top: 30px;
    }
  }

  .nav-section {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 16px;
    border-radius: 8px;
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .nav-section:hover {
    background: rgba(59, 130, 246, 0.1);
  }

  .nav-section.active {
    background: rgba(59, 130, 246, 0.15);
    border: 1px solid rgba(59, 130, 246, 0.3);
  }

  .mobile-menu .nav-section {
    margin-bottom: 10px;
  }

  .mobile-menu .menu-divider {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }

  .mobile-menu-header {
    margin-top: 30px;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .scroll-indicator {
    position: fixed;
    top: 70px;
    left: 0;
    width: 100%;
    height: 3px;
    background: rgba(59, 130, 246, 0.1);
    z-index: 999;
  }

  .scroll-progress {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-from), var(--accent-to));
    width: 0%;
    transition: width 0.3s ease;
  }

  @media (max-width: 768px) {
    h1 {
      font-size: 1.75rem;
    }
    
    h3 {
      font-size: 1.25rem;
    }
    
    .info-card, .pricing-card {
      padding: 1.25rem;
    }
    
    .apikey-display {
      flex-direction: column;
      align-items: stretch;
      gap: 10px;
    }
    
    .apikey-text {
      padding-right: 0;
      text-align: center;
    }
    
    .copy-btn {
      width: 100%;
      justify-content: center;
    }
    
    section {
      scroll-margin-top: 100px;
    }
  }

  @media (max-width: 480px) {
    h1 {
      font-size: 1.5rem;
    }
    
    .info-card, .pricing-card {
      padding: 1rem;
    }
    
    .update-badge {
      padding: 4px 10px;
      font-size: 11px;
    }
    
    .mobile-menu {
      width: 85%;
    }
    
    section {
      scroll-margin-top: 90px;
    }
  }

  @media (max-width: 360px) {
    .nav-content {
      padding: 0 0.5rem;
    }
    
    .btn-primary {
      padding: 0.6rem 1rem;
      font-size: 12px;
    }
    
    h1 {
      font-size: 1.4rem;
    }
    
    .mobile-menu {
      width: 90%;
    }
  }

  @media (min-width: 769px) and (max-width: 1024px) {
    .nav-content {
      padding: 0 1.5rem;
    }
    
    main {
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }
    
    h1 {
      font-size: 1.9rem;
    }
  }

  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, var(--accent-from), var(--accent-to));
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, var(--accent-to), #1d4ed8);
  }

  .info-section-title {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: var(--text);
  }
  </style>
</head>

<body class="min-h-screen text-white">
  
  <header class="nav-full">
    <div class="nav-content">
      <div class="flex items-center gap-4">
        <div id="hamb" class="hamburger lg:hidden">
          <span class="line"></span>
          <span class="line"></span>
          <span class="line"></span>
        </div>
        
        <div class="flex items-center gap-3">
          <div>
            <h1 class="text-xl font-bold gradient-text">RulzXD API</h1>
            <div class="text-xs muted hidden md:block">Info & Updates</div>
          </div>
        </div>
      </div>
      
      <nav class="hidden lg:flex items-center gap-4">
        <a href="#updates" class="nav-section" data-section="updates">
          <i class="fas fa-bullhorn"></i>
          <span>Latest Updates</span>
        </a>
        <a href="#apikeys" class="nav-section" data-section="apikeys">
          <i class="fas fa-key"></i>
          <span>Free API Key</span>
        </a>
        <a href="#faq" class="nav-section" data-section="faq">
          <i class="fas fa-question-circle"></i>
          <span>FAQ</span>
        </a>
      </nav>
      
      <div class="flex items-center gap-3">
        <a href="https://t.me/@rulzzofficial" target="_blank" class="btn-primary text-sm">
          <i class="fab fa-telegram mr-2"></i> <span>Support</span>
        </a>
      </div>
    </div>
  </header>

  <div class="scroll-indicator">
    <div class="scroll-progress" id="scrollProgress"></div>
  </div>
  
  <div id="mobileOverlay" class="mobile-overlay"></div>
  
  <div id="mobileMenu" class="mobile-menu">
    <div class="p-6">
      <div class="flex items-center justify-between mb-6 mobile-menu-header">
        <div class="flex items-center gap-3">
          <h2 class="text-xl font-bold gradient-text">Info Sections</h2>
        </div>
        <button id="closeMenu" class="text-gray-300 hover:text-white text-2xl">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <nav class="flex flex-col mb-8">
        <a href="#updates" class="nav-section" data-section="updates">
          <i class="fas fa-bullhorn w-5"></i>
          <span>Latest Updates</span>
        </a>
        <a href="#apikeys" class="nav-section" data-section="apikeys">
          <i class="fas fa-key w-5"></i>
          <span>Free API Key</span>
        </a>
        <a href="#faq" class="nav-section" data-section="faq">
          <i class="fas fa-question-circle w-5"></i>
          <span>FAQ</span>
        </a>
      </nav>
      
      <div class="menu-divider">
        <div class="text-xs uppercase text-gray-400 font-semibold mb-4">Main Menu</div>
        <nav class="flex flex-col">
          <a href="/" class="flex items-center gap-3 text-gray-300 hover:text-white p-3 rounded-lg hover:bg-white/5 transition-colors">
            <i class="fas fa-home w-5"></i> Home
          </a>
          <a href="/dashboard" class="flex items-center gap-3 text-gray-300 hover:text-white p-3 rounded-lg hover:bg-white/5 transition-colors">
            <i class="fas fa-tachometer-alt w-5"></i> Dashboard
          </a>
          <a href="/info" class="flex items-center gap-3 text-blue-300 p-3 rounded-lg bg-blue-500/10 border border-blue-500/20">
            <i class="fas fa-info-circle w-5"></i> Info & Updates
          </a>
          <a href="/buy-apikey" class="flex items-center gap-3 text-gray-300 hover:text-white p-3 rounded-lg hover:bg-white/5 transition-colors">
            <i class="fas fa-crown w-5"></i> Buy API Key
          </a>
          <a href="/donasi" class="flex items-center gap-3 text-gray-300 hover:text-white p-3 rounded-lg hover:bg-white/5 transition-colors">
            <i class="fas fa-wallet w-5"></i> Donasi
          </a>
          <a href="/login" class="flex items-center gap-3 text-gray-300 hover:text-white p-3 rounded-lg hover:bg-white/5 transition-colors">
            <i class="fas fa-user w-5"></i> Login
          </a>
          <a href="https://t.me/@rulzzofficial" target="_blank" class="flex items-center gap-3 text-gray-300 hover:text-white p-3 rounded-lg hover:bg-white/5 mt-2">
            <i class="fab fa-telegram w-5"></i> Telegram Support
          </a>
        </nav>
      </div>
    </div>
  </div>

<main>
  <div id="loadingState" class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-text">Memuat informasi...</p>
  </div>

  <div id="contentState" class="hidden">
    <section id="updates">
      <h1><i class="fas fa-bullhorn"></i>Latest Updates</h1>
      <div id="updates-list"></div>
    </section>

    <section id="apikeys">
      <h1><i class="fas fa-key"></i>Free API Key</h1>
      <div id="apikey-list"></div>
    </section>

    <section id="faq">
      <h1><i class="fas fa-question-circle"></i>Frequently Asked Questions</h1>
      <div id="faq-list"></div>
    </section>
  </div>
</main>

<footer class="py-8 border-t border-white/5">
  <div class="text-center">
    <p class="text-sm muted mb-4">© 2024 - 2025 RulzXD API | All rights reserved</p>
    <div class="flex justify-center gap-6">
      <a href="https://github.com/RulzzOfficiaL" target="_blank" class="text-gray-400 hover:text-white transition-colors">
        <i class="fab fa-github text-xl"></i>
      </a>
      <a href="https://wa.me/6285133226206" target="_blank" class="text-gray-400 hover:text-green-400 transition-colors">
        <i class="fab fa-whatsapp text-xl"></i>
      </a>
      <a href="https://www.youtube.com/@bangrulzz44" target="_blank" class="text-gray-400 hover:text-white transition-colors">
        <i class="fab fa-youtube text-xl"></i>
      </a>
      <a href="https://www.instagram.com/@rulzz00__" target="_blank" class="text-gray-400 hover:text-green-400 transition-colors">
        <i class="fab fa-instagram text-xl"></i>
      </a>
      <a href="mailto:rulzzofficial628@gmail.com" class="text-gray-400 hover:text-red-400 transition-colors">
        <i class="fas fa-envelope text-xl"></i>
      </a>
    </div>
  </div>
</footer>

<script>
let currentSection = 'updates';

function setupMobileMenu() {
  const hamb = document.getElementById('hamb');
  const mobileMenu = document.getElementById('mobileMenu');
  const closeMenu = document.getElementById('closeMenu');
  const overlay = document.getElementById('mobileOverlay');

  if (!hamb || !mobileMenu) return;

  function closeAll() {
    hamb.classList.remove('active');
    mobileMenu.classList.remove('open');
    overlay.classList.remove('active');
    document.body.style.overflow = '';
  }

  hamb.onclick = () => {
    hamb.classList.toggle('active');
    mobileMenu.classList.toggle('open');
    overlay.classList.toggle('active');
    document.body.style.overflow = mobileMenu.classList.contains('open') ? 'hidden' : '';
  };

  closeMenu && (closeMenu.onclick = closeAll);
  overlay && (overlay.onclick = closeAll);

  const mobileLinks = mobileMenu.querySelectorAll('a[href^="#"]');
  mobileLinks.forEach(link => {
    link.addEventListener('click', () => {
      closeAll();
    });
  });
}

function escapeHtml(str) {
  if (!str) return '';
  return String(str)
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#39;');
}

function setupCopyButtons() {
  document.addEventListener('click', function(e) {
    const copyBtn = e.target.closest('.copy-btn');
    if (copyBtn) {
      e.preventDefault();
      
      let textToCopy = '';
      const targetId = copyBtn.getAttribute('data-target');
      const apikey = copyBtn.getAttribute('data-apikey');
      
      if (targetId) {
        const targetElement = document.getElementById(targetId);
        if (targetElement) {
          textToCopy = targetElement.textContent;
        }
      } else if (apikey) {
        textToCopy = apikey;
      }
      
      if (textToCopy) {
        navigator.clipboard.writeText(textToCopy).then(() => {
          const originalHTML = copyBtn.innerHTML;
          const originalClasses = copyBtn.className;
          
          copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
          copyBtn.className = originalClasses + ' copied';
          
          setTimeout(() => {
            copyBtn.innerHTML = originalHTML;
            copyBtn.className = originalClasses;
          }, 2000);
        }).catch(err => {
          console.error('Copy failed:', err);
        });
      }
    }
  });
}

function setupFAQ() {
  document.addEventListener('click', function(e) {
    if (e.target.closest('.faq-item')) {
      const faqItem = e.target.closest('.faq-item');
      const answer = faqItem.querySelector('.faq-answer');
      const icon = faqItem.querySelector('.faq-icon');
      
      faqItem.classList.toggle('active');
      answer.classList.toggle('show');
      
      if (icon) {
        icon.style.transform = faqItem.classList.contains('active') ? 'rotate(180deg)' : 'rotate(0deg)';
      }
    }
  });
}

function setupSectionNavigation() {
  const sections = document.querySelectorAll('section');
  const navSections = document.querySelectorAll('.nav-section');
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const id = entry.target.id;
        currentSection = id;
        
        navSections.forEach(nav => {
          if (nav.getAttribute('data-section') === id) {
            nav.classList.add('active');
          } else {
            nav.classList.remove('active');
          }
        });
      }
    });
  }, {
    rootMargin: '-120px 0px -50% 0px',
    threshold: 0.2
  });
  
  sections.forEach(section => {
    observer.observe(section);
  });
  
  navSections.forEach(nav => {
    nav.addEventListener('click', (e) => {
      e.preventDefault();
      const sectionId = nav.getAttribute('data-section');
      const targetSection = document.getElementById(sectionId);
      
      if (targetSection) {
        const offsetTop = targetSection.offsetTop - 100;
        window.scrollTo({
          top: offsetTop,
          behavior: 'smooth'
        });
      }
    });
  });
}

function setupScrollProgress() {
  window.addEventListener('scroll', () => {
    const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (winScroll / height) * 100;
    document.getElementById('scrollProgress').style.width = scrolled + '%';
  });
}

async function loadInfo() {
  try {
    const response = await fetch('/api/info');
    
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}`);
    }
    
    const result = await response.json();
    
    if (!result.data) {
      throw new Error('Data tidak ditemukan');
    }
    
    const dataArray = Array.isArray(result.data) ? result.data : [result.data];
    const infoData = dataArray[0] || {};
    
    renderUpdates(infoData.updates || []);
    renderPricing(infoData.apikeys || []);
    renderFAQ(infoData.faq || []);
    
    document.getElementById('loadingState').classList.add('hidden');
    document.getElementById('contentState').classList.remove('hidden');
    
    setTimeout(() => {
      setupSectionNavigation();
    }, 100);
    
  } catch (error) {
    console.error('Error loading info:', error);
    document.getElementById('loadingState').innerHTML = `
      <div class="text-center py-8">
        <i class="fas fa-exclamation-triangle text-yellow-400 text-3xl mb-4"></i>
        <p class="font-semibold text-white">Gagal memuat informasi</p>
        <p class="text-gray-400 mb-4">${escapeHtml(error.message)}</p>
        <button onclick="location.reload()" class="btn-primary">
          <i class="fas fa-redo mr-2"></i>Coba Lagi
        </button>
      </div>
    `;
  }
}

function renderUpdates(updates) {
  const container = document.getElementById('updates-list');
  if (!container) return;
  
  if (!updates || !updates.length) {
    container.innerHTML = '<p class="text-gray-400 text-center">Tidak ada update tersedia</p>';
    return;
  }
  
  container.innerHTML = updates.map(update => {
    const features = (update.features || []).map(feature => `
      <div class="feature-item">
        <div class="feature-icon">
          <i class="fas ${feature.icon || 'fa-check'}"></i>
        </div>
        <div>
          <div class="feature-title">${escapeHtml(feature.title || '')}</div>
          <div class="feature-desc">${escapeHtml(feature.desc || '')}</div>
        </div>
      </div>
    `).join('');
    
    return `
      <div class="info-card">
        <div class="flex items-center justify-between mb-4">
          <span class="update-badge badge-${(update.badge || 'info').toLowerCase()}">
            ${update.badge || 'INFO'}
          </span>
          <small class="muted">${escapeHtml(update.date || '')}</small>
        </div>
        <h3>${escapeHtml(update.title || '')}</h3>
        <p class="text-white mb-4">${escapeHtml(update.desc || '')}</p>
        
        ${features ? `
          <div class="border-t border-gray-700 pt-4 mt-4">
            <div class="text-sm font-semibold text-white mb-3">Fitur Update:</div>
            ${features}
          </div>
        ` : ''}
      </div>
    `;
  }).join('');
}

function renderPricing(apikeys) {
  const container = document.getElementById('apikey-list');
  if (!container) return;
  
  if (!apikeys || !apikeys.length) {
    container.innerHTML = '<p class="text-gray-400 text-center">Informasi harga belum tersedia</p>';
    return;
  }
  
  container.innerHTML = apikeys.map((plan, index) => {
    const features = (plan.features || []).map(f => `
      <div class="flex items-center gap-2 mb-1">
        <i class="fas ${f.icon || 'fa-check'} text-green-400 text-sm"></i>
        <span class="text-sm text-gray-300">${escapeHtml(f.text || '')}</span>
      </div>
    `).join('');
    
    const limits = (plan.limits || []).map(l => `
      <li class="text-sm text-gray-300 mb-1">✓ ${escapeHtml(l)}</li>
    `).join('');
    
    const planId = `apikey-${index}`;
    
    return `
      <div class="pricing-card">
        <div class="flex items-center justify-between mb-4">
          <div>
            <h2 class="font-bold text-xl">${escapeHtml(plan.plan || 'FREE PLAN')}</h2>
            ${plan.name ? `<div class="text-sm text-gray-300">${escapeHtml(plan.name)}</div>` : ''}
          </div>
          ${plan.badge ? `<span class="update-badge badge-info">${plan.badge}</span>` : ''}
        </div>
        
        <h3 class="text-3xl font-bold gradient-text mb-3">${escapeHtml(plan.price || 'FREE')}</h3>
        
        <p class="text-gray-300 mb-4">${escapeHtml(plan.description || '')}</p>
        
        ${plan.token ? `
          <div class="apikey-display">
            <div class="apikey-text" id="${planId}">
              ${escapeHtml(plan.token || '')}
            </div>
            <button class="copy-btn" data-target="${planId}">
              <i class="far fa-copy"></i> Copy
            </button>
          </div>
        ` : ''}
        
        ${limits ? `
          <div class="mb-4">
            <h4 class="font-semibold text-white mb-2">Limits:</h4>
            <ul class="space-y-1">
              ${limits}
            </ul>
          </div>
        ` : ''}
        
        ${features ? `
          <div class="mb-6">
            <h4 class="font-semibold text-white mb-2">Features:</h4>
            <div class="space-y-1">
              ${features}
            </div>
          </div>
        ` : ''}
        
        <a href="/buy-apikey" class="btn-primary inline-block w-full text-center">
          <i class="fas fa-shopping-cart mr-2"></i>Buy API Key
        </a>
      </div>
    `;
  }).join('');
}

function renderFAQ(faqs) {
  const container = document.getElementById('faq-list');
  if (!container) return;
  
  if (!faqs || !faqs.length) {
    container.innerHTML = '<p class="text-gray-400 text-center">Tidak ada FAQ tersedia</p>';
    return;
  }
  
  container.innerHTML = faqs.map(faq => `
    <div class="faq-item">
      <div class="faq-question">
        <span>${escapeHtml(faq.question || '')}</span>
        <i class="fas fa-chevron-down faq-icon"></i>
      </div>
      <div class="faq-answer">
        <p class="text-gray-300">${escapeHtml(faq.answer || '')}</p>
      </div>
    </div>
  `).join('');
}

document.addEventListener('DOMContentLoaded', function() {
  setupMobileMenu();
  setupCopyButtons();
  setupFAQ();
  setupScrollProgress();
  loadInfo();
});
</script>
</body>
</html>